'''
Mapping script that passes current doc through to out channel

@author: jknaus
'''
#mapping-script
import bots.transform as transform
from bots.botsconfig import *
from badgerEDI import eLog

def main(inn,out):
    DocReferenceID = out.ta_info['reference']
    eLog.info('Assigned EDI control number %s to EXSYS doc %s of type %s from %s to %s',
        DocReferenceID,
        inn.ta_info['reference'], 
        inn.ta_info['messagetype'], 
        inn.ta_info['frompartner'], 
        inn.ta_info['topartner'])

    # now assign new TS doc ref id to proper fields in out doc    
    inn.change(where=({'BOTSID':'ST', 'ST02':'00001'},), change={'ST02':DocReferenceID})
    inn.change(where=({'BOTSID':'ST'}, {'BOTSID':'SE', 'SE02':'00001'}), change={'SE02':DocReferenceID})
    
    transform.inn2out(inn,out)
  
